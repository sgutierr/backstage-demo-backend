/// <reference types="node" />
import { Config } from '@backstage/config';
import { PluginEndpointDiscovery, TokenManager } from '@backstage/backend-common';
import { GetEntitiesRequest, CatalogApi } from '@backstage/catalog-client';
import { DocumentCollatorFactory } from '@backstage/plugin-search-common';
import { Permission } from '@backstage/plugin-permission-common';
import { Readable } from 'stream';
import { Entity } from '@backstage/catalog-model';
import { CatalogEntityDocument } from '@backstage/plugin-catalog-common';

/** @public */
type CatalogCollatorEntityTransformer = (entity: Entity) => Omit<CatalogEntityDocument, 'location' | 'authorization'>;

/** @public */
type DefaultCatalogCollatorFactoryOptions = {
    discovery: PluginEndpointDiscovery;
    tokenManager: TokenManager;
    locationTemplate?: string;
    filter?: GetEntitiesRequest['filter'];
    batchSize?: number;
    catalogClient?: CatalogApi;
    entityTransformer?: CatalogCollatorEntityTransformer;
};
/** @public */
declare class DefaultCatalogCollatorFactory implements DocumentCollatorFactory {
    readonly type = "software-catalog";
    readonly visibilityPermission: Permission;
    private locationTemplate;
    private filter?;
    private batchSize;
    private readonly catalogClient;
    private tokenManager;
    private entityTransformer;
    static fromConfig(_config: Config, options: DefaultCatalogCollatorFactoryOptions): DefaultCatalogCollatorFactory;
    private constructor();
    getCollator(): Promise<Readable>;
    private execute;
    private applyArgsToFormat;
}

/** @public */
declare const defaultCatalogCollatorEntityTransformer: CatalogCollatorEntityTransformer;

export { CatalogCollatorEntityTransformer, DefaultCatalogCollatorFactory, DefaultCatalogCollatorFactoryOptions, defaultCatalogCollatorEntityTransformer };
